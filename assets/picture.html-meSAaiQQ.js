import{_ as e,c as d,a as r,o as s}from"./app-CNRVLuyw.js";const c={};function a(o,t){return s(),d("div",null,[...t[0]||(t[0]=[r('<h1 id="图片格式化" tabindex="-1"><a class="header-anchor" href="#图片格式化"><span>图片格式化</span></a></h1><p>已知 <code>*.hdslb.com</code> <code>*.biliimg.com</code> 等域名作用等效, 对于请求头 <code>Referer</code> 要求留空或在 <code>.bilibili.com</code> 等 B 站域名下 </p><p>对于以上域名的 <code>/bfs/</code> 下的图片文件都可以使用以下可选格式化参数</p><p>使用 <code>@</code> 开始参数 (无论格式如何, 无论是否有参数, 通过计算 HASH 发现, 使用 <code>@</code> 均会导致返回图片不同), 多个参数以 <code>_</code> 分隔, 图片格式无需分隔且必须放在最后</p><p>参见: <a href="https://github.com/SocialSisterYi/bilibili-API-collect/issues/191" target="_blank" rel="noopener noreferrer">#191</a></p><p>注: jpg 即 jpeg, 二者等效. 网页端常用 AVIF, WebP.</p><table><thead><tr><th>参数</th><th>格式</th><th>含义</th><th>备注</th></tr></thead><tbody><tr><td>w</td><td>${int}w</td><td>图片最大限制宽度</td><td>范围 [1, 9223372036854775807]</td></tr><tr><td>h</td><td>${int}h</td><td>图片最大限制高度</td><td>范围 [1, 9223372036854775807]</td></tr><tr><td>s</td><td>${int}s</td><td>作用尚不明确</td><td>不影响输出结果, 范围 [1, 9223372036854775807]</td></tr><tr><td>e</td><td>${int}e</td><td>改变大小</td><td>0: 保留比例取其小, 1: 保留比例取其大, 2: 不保留原比例</td></tr><tr><td>p</td><td>${int}p</td><td>缩放倍数</td><td>默认100, 范围 [1, 1000]</td></tr><tr><td>o</td><td>${int}o</td><td>作用尚不明确</td><td>不影响输出结果 范围 [0, 1]</td></tr><tr><td>q</td><td>${int}q</td><td>图片质量百分比</td><td>仅限webp/jpeg/avif</td></tr><tr><td>c</td><td>${int}c</td><td>裁切图片(如果宽高允许)</td><td>0: 不裁切但会修改图片, 1: 上传时的预设规则(若无则右下), 2: 左上, 3: 右上</td></tr><tr><td>f</td><td>${int}f</td><td>作用尚不明确</td><td>[0, 1]: 不改变图片, 2: 会改变图片</td></tr><tr><td>progressive</td><td>progressive</td><td>图片编码方式</td><td>仅限 jpeg(无: baseline, 有: progressive)/png(无:non-interlaced, 有: interlaced)</td></tr><tr><td>!</td><td>!${str}</td><td>加载来源</td><td>web-home-carousel-cover, header, web-dynamic, web-avatar-space-header, ...</td></tr><tr><td>.</td><td>.${str}</td><td>图片格式</td><td>仅限 png/jpeg/webp/avif/<a href="#avg_color%E6%A0%BC%E5%BC%8F%E8%AF%B4%E6%98%8E">avg_color</a></td></tr></tbody></table><p><strong>示例：</strong></p><details><summary>查看示例:</summary><p>原始图片</p><p>https://i1.hdslb.com/bfs/archive/e5fff1472bad1c0c6bcb3004205f9be23b58ffc0.jpg</p><img src="https://i1.hdslb.com/bfs/archive/e5fff1472bad1c0c6bcb3004205f9be23b58ffc0.jpg" referrerpolicy="no-referrer"><p>高度限制为100</p><p>https://i1.hdslb.com/bfs/archive/e5fff1472bad1c0c6bcb3004205f9be23b58ffc0.jpg@100h</p><img src="https://i1.hdslb.com/bfs/archive/e5fff1472bad1c0c6bcb3004205f9be23b58ffc0.jpg@100h" referrerpolicy="no-referrer"><p>宽度限制为100</p><p>https://i1.hdslb.com/bfs/archive/e5fff1472bad1c0c6bcb3004205f9be23b58ffc0.jpg@100w</p><img src="https://i1.hdslb.com/bfs/archive/e5fff1472bad1c0c6bcb3004205f9be23b58ffc0.jpg@100w" referrerpolicy="no-referrer"><p>转换格式为webp</p><p>https://i1.hdslb.com/bfs/archive/e5fff1472bad1c0c6bcb3004205f9be23b58ffc0.jpg@.webp</p><img src="https://i1.hdslb.com/bfs/archive/e5fff1472bad1c0c6bcb3004205f9be23b58ffc0.jpg@.webp" referrerpolicy="no-referrer"><p>转换为webp图片质量为1%</p><p>https://i1.hdslb.com/bfs/archive/e5fff1472bad1c0c6bcb3004205f9be23b58ffc0.jpg@1q.webp</p><img src="https://i1.hdslb.com/bfs/archive/e5fff1472bad1c0c6bcb3004205f9be23b58ffc0.jpg@1q.webp" referrerpolicy="no-referrer"></details><h2 id="avg-color格式说明" tabindex="-1"><a class="header-anchor" href="#avg-color格式说明"><span>avg_color格式说明</span></a></h2><p>当图片格式化输出格式为<code>avg_color</code>时</p><blockquote><p>/bfs/*/*.*@*.avg_color</p></blockquote><p><em>请求方式：GET</em></p><p><strong>json回复：</strong></p><p>根对象：</p><table><thead><tr><th>字段</th><th>类型</th><th>内容</th><th>备注</th></tr></thead><tbody><tr><td>RGB</td><td>str</td><td>平均颜色值</td><td>HEX</td></tr></tbody></table><p><strong>示例：</strong></p><p>获取 https://i1.hdslb.com/bfs/archive/e5fff1472bad1c0c6bcb3004205f9be23b58ffc0.jpg 的平均颜色值</p><div class="language-shell line-numbers-mode" data-highlighter="shiki" data-ext="shell" style="background-color:#1E1E1E;color:#D4D4D4;"><pre class="shiki dark-plus vp-code"><code class="language-shell"><span class="line"><span style="color:#DCDCAA;">curl</span><span style="color:#CE9178;"> &#39;https://i1.hdslb.com/bfs/archive/e5fff1472bad1c0c6bcb3004205f9be23b58ffc0.jpg@.avg_color&#39;</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><details><summary>查看响应示例：</summary><div class="language-json line-numbers-mode" data-highlighter="shiki" data-ext="json" style="background-color:#1E1E1E;color:#D4D4D4;"><pre class="shiki dark-plus vp-code"><code class="language-json"><span class="line"><span style="color:#D4D4D4;">{</span></span>\n<span class="line"><span style="color:#9CDCFE;">    &quot;RGB&quot;</span><span style="color:#D4D4D4;">: </span><span style="color:#CE9178;">&quot;#7d6f6c&quot;</span></span>\n<span class="line"><span style="color:#D4D4D4;">}</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></details>',20)])])}const i=e(c,[["render",a]]),b=JSON.parse('{"path":"/docs/misc/picture.html","title":"图片格式化","lang":"zh-CN","frontmatter":{},"git":{"updatedTime":1769844243000,"contributors":[{"name":"renovate[bot]","username":"renovate[bot]","email":"29139614+renovate[bot]@users.noreply.github.com","commits":1,"url":"https://github.com/renovate[bot]"}],"changelog":[{"hash":"63a3e30d6656f49fd1e49ca8e303b95d209c0fbc","time":1769844243000,"email":"29139614+renovate[bot]@users.noreply.github.com","author":"renovate[bot]","message":"chore(deps): update dependency sass-embedded to v1.97.3"}]},"filePathRelative":"docs/misc/picture.md"}');export{i as comp,b as data};
